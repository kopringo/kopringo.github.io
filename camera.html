<html>
	<head>
		<script type="text/javascript">
		
		function toggleFullScreen(elem) {
		    // ## The below if statement seems to work better ## if ((document.fullScreenElement && document.fullScreenElement !== null) || (document.msfullscreenElement && document.msfullscreenElement !== null) || (!document.mozFullScreen && !document.webkitIsFullScreen)) {
		    if ((document.fullScreenElement !== undefined && document.fullScreenElement === null) || (document.msFullscreenElement !== undefined && document.msFullscreenElement === null) || (document.mozFullScreen !== undefined && !document.mozFullScreen) || (document.webkitIsFullScreen !== undefined && !document.webkitIsFullScreen)) {
		        if (elem.requestFullScreen) {
		            elem.requestFullScreen();
		        } else if (elem.mozRequestFullScreen) {
		            elem.mozRequestFullScreen();
		        } else if (elem.webkitRequestFullScreen) {
		            elem.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
		        } else if (elem.msRequestFullscreen) {
		            elem.msRequestFullscreen();
		        }
		    } else {
		        if (document.cancelFullScreen) {
		            document.cancelFullScreen();
		        } else if (document.mozCancelFullScreen) {
		            document.mozCancelFullScreen();
		        } else if (document.webkitCancelFullScreen) {
		            document.webkitCancelFullScreen();
		        } else if (document.msExitFullscreen) {
		            document.msExitFullscreen();
		        }
		    }
		}
		
		
		var windowHeight = window.innerHeight;
		var windowWidth = window.innerWidth;
		
		window.addEventListener("DOMContentLoaded", function() {
			
			
			
			// Grab elements, create settings, etc.
			var canvas = document.getElementById("canvas"),
				context = canvas.getContext("2d"),
				video = document.getElementById("video"),
				videoObj = { "video": true },
				errBack = function(error) {
					console.log("Video capture error: ", error.code); 
				};

			navigator.getUserMedia = navigator.getUserMedia ||
                navigator.webkitGetUserMedia ||
                navigator.mozGetUserMedia;
			
			if (navigator.getUserMedia) {
				navigator.getUserMedia({ audio: true, video: { width: 1280, height: 720 } },
					      function(stream) {
					         video.srcObject = stream;
					         video.onloadedmetadata = function(e) {
					           video.play();
					         };
					      },
					      function(err) {
					         console.log("The following error occurred: " + err.name);
					      }
					   );
			} else {
				console.log("getUserMedia not supported");
			}
				
			/*
			// Put video listeners into place
			if(navigator.getUserMedia) { // Standard
				navigator.getUserMedia(videoObj, function(stream) {
					video.src = stream;
					video.play();
				}, errBack);
			} else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
				navigator.webkitGetUserMedia(videoObj, function(stream){
					video.src = window.webkitURL.createObjectURL(stream);
					video.play();
				}, errBack);
			}
			else if(navigator.mozGetUserMedia) { // Firefox-prefixed
				navigator.mozGetUserMedia(videoObj, function(stream){
					video.src = window.URL.createObjectURL(stream);
					video.play();
				}, errBack);
			}
			*/
			
			document.getElementById("snap").addEventListener("click", function() {
				context.drawImage(video, 0, 0, 640, 480);
			});
			document.getElementById("e1").addEventListener("click", function() {
				document.getElementById("image").src = 'photos/e1.jpg';
			});
			document.getElementById("e2").addEventListener("click", function() {
				document.getElementById("image").src = 'photos/e2.jpg';
			});
			document.getElementById("e3").addEventListener("click", function() {
				document.getElementById("image").src = 'photos/e3.jpg';
			});
			document.getElementById("e4").addEventListener("click", function() {
				document.getElementById("image").src = 'photos/e4.jpg';
			});
			document.getElementById("e5").addEventListener("click", function() {
				document.getElementById("image").src = 'photos/e5.jpg';
			});
			document.getElementById("e6").addEventListener("click", function() {
				document.getElementById("image").src = 'photos/e6.jpg';
			});
			
			document.getElementById("e7").addEventListener("click", function() {
				document.getElementById("image").src = 'photos/e6.jpg';
			});
		}, false);
		
		
		</script>
	</head>
	
	<body>
		<input type="button" value="click to toggle fullscreen" onclick="toggleFullScreen(document.body)">
	
		<div style="position: absolute; overflow: hidden; width: 640px; height: 480px;">
			<img style="position: absolute; width: 640px;" id="image" src="photos/e1.jpg"></img>
		</div>
		<video id="video" width="640" height="480" autoplay style="opacity: 0.5;"></video>
		
		<br/><br/>
		<style>
		button{
			height: 50px;
			width: 150px;
			
		}
		</style>
		<button id="snap">Snap Photo</button>
		<button id="e1">E1</button>
		<button id="e2">E2</button>
		<button id="e3">E3</button>
		<button id="e4">E4</button>
		<button id="e5">E5</button>
		<button id="e6">E6</button>
		
		<button id="e7">S</button>
		
		
		<canvas id="canvas" width="640" height="480"></canvas>
	</body>

</html>